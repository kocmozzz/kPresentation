{"version":3,"sources":["polyfills.js","helpers.js","kpresentation.js","kshow.js"],"names":[],"mappings":"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","file":"kpresentations.min.js","sourcesContent":["if (!Function.prototype.bind) {\r\n    Function.prototype.bind = function (oThis) {\r\n        if (typeof this !== 'function') {\r\n            // closest thing possible to the ECMAScript 5\r\n            // internal IsCallable function\r\n            throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\r\n        }\r\n\r\n        var aArgs = Array.prototype.slice.call(arguments, 1),\r\n            fToBind = this,\r\n            fNOP = function () {\r\n            },\r\n            fBound = function () {\r\n                return fToBind.apply(this instanceof fNOP && oThis\r\n                        ? this\r\n                        : oThis,\r\n                    aArgs.concat(Array.prototype.slice.call(arguments)));\r\n            };\r\n\r\n        fNOP.prototype = this.prototype;\r\n        fBound.prototype = new fNOP();\r\n\r\n        return fBound;\r\n    };\r\n}","(function () {\r\n    this.Helper = function () {\r\n    };\r\n\r\n    /**\r\n     * Extend default options\r\n     * @param defaultOptions\r\n     * @param customOptions\r\n     * @returns {*}\r\n     */\r\n    Helper.prototype.extendDefaultOptions = function (defaultOptions, customOptions) {\r\n        var property;\r\n\r\n        for (property in customOptions) {\r\n            if (customOptions.hasOwnProperty(property)) {\r\n                defaultOptions[property] = customOptions[property];\r\n            }\r\n        }\r\n\r\n        return defaultOptions;\r\n    };\r\n})();","(function (window, document, undefined) {\r\n\r\n    function Exception(message) {\r\n        console.warn(message);\r\n    }\r\n\r\n    /**\r\n     * Presentation\r\n     * @param domObj\r\n     * @param frameTagName\r\n     * @constructor\r\n     */\r\n    this.KPresentation = function (domObj, frameTagName) {\r\n        this.options = {\r\n            activePresentationClass: 'is-shown',\r\n            activeBodyClass: 'show-started',\r\n            activeFrameClass: 'active',\r\n            browserPrefixes: [\r\n                'WebkitTransform',\r\n                'MozTransform',\r\n                'msTransform',\r\n                'OTransform',\r\n                'transform'\r\n            ]\r\n        };\r\n\r\n        this.isShown = false;\r\n        this.slides = [];\r\n        this.activeSlide = 0;\r\n        this.slidesCount = 0;\r\n\r\n        this.domObj = domObj;\r\n\r\n        this.slides = this.domObj.getElementsByTagName(frameTagName);\r\n        this.slides = Array.prototype.slice.call(this.slides);\r\n        this.slidesCount = this.slides.length;\r\n\r\n        /**\r\n         * Prepare presentation to be started by click on it\r\n         */\r\n        function preparePresentationToBeShown() {\r\n            this.domObj.addEventListener('click', this.startPresentation.bind(this));\r\n        }\r\n\r\n        function init() {\r\n            if (this.slidesCount) {\r\n                this.slides[0].classList.add(this.options.activeFrameClass);\r\n                preparePresentationToBeShown.call(this);\r\n            } else {\r\n                throw new Exception(\"No slides available. Check slides class selector.\");\r\n            }\r\n        }\r\n\r\n        init.call(this);\r\n\r\n        return this;\r\n    };\r\n\r\n    KPresentation.prototype = new Helper();\r\n\r\n    /* Public methods */\r\n\r\n    /**\r\n     * Start presentation\r\n     */\r\n    KPresentation.prototype.startPresentation = function () {\r\n        if (this.isShown) return;\r\n\r\n        this.domObj.classList.add(this.options.activePresentationClass);\r\n        document.body.classList.add(this.options.activeBodyClass);\r\n        this.isShown = true;\r\n        this.resize(this.computeScale());\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Cancel presentation\r\n     */\r\n    KPresentation.prototype.stopPresentation = function () {\r\n        this.domObj.classList.remove(this.options.activePresentationClass);\r\n        document.body.classList.remove(this.options.activeBodyClass);\r\n        this.isShown = false;\r\n        this.resize(1);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Go to next slide\r\n     */\r\n    KPresentation.prototype.next = function () {\r\n        if (this.checkLast()) return;\r\n\r\n        this.slides[this.activeSlide].classList.remove(this.options.activeFrameClass);\r\n        this.activeSlide++;\r\n        this.slides[this.activeSlide].classList.add(this.options.activeFrameClass);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Go to prev slide\r\n     */\r\n    KPresentation.prototype.prev = function () {\r\n        if (this.checkFirst()) return;\r\n\r\n        this.slides[this.activeSlide].classList.remove(this.options.activeFrameClass);\r\n        this.activeSlide--;\r\n        this.slides[this.activeSlide].classList.add(this.options.activeFrameClass);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Go to $index slide\r\n     */\r\n    KPresentation.prototype.goto = function (i) {\r\n        if (i < 0 || i > this.slidesCount - 1) return false;\r\n\r\n        this.slides[this.activeSlide].classList.remove(this.options.activeFrameClass);\r\n        this.activeSlide = i;\r\n        this.slides[this.activeSlide].classList.add(this.options.activeFrameClass);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Check if active slide is last\r\n     */\r\n    KPresentation.prototype.checkLast = function () {\r\n        return this.activeSlide === this.slidesCount - 1;\r\n    };\r\n\r\n    /**\r\n     * Check if active slide is first\r\n     */\r\n    KPresentation.prototype.checkFirst = function () {\r\n        return this.activeSlide === 0;\r\n    };\r\n\r\n    /**\r\n     * Find index of slide\r\n     * @param slide\r\n     * @returns {boolean}\r\n     */\r\n    KPresentation.prototype.indexOf = function (slide) {\r\n        return this.slides.indexOf(slide);\r\n    };\r\n\r\n    /**\r\n     * Resize presentation to fill window properly\r\n     * @param scale\r\n     */\r\n    KPresentation.prototype.resize = function (scale) {\r\n        var self = this;\r\n\r\n        this.options.browserPrefixes.forEach(function (prop) {\r\n            self.domObj.style[prop] = 'scale(' + scale + ')';\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Compute scale to resize presentation\r\n     * @returns {number}\r\n     */\r\n    KPresentation.prototype.computeScale = function () {\r\n        return 1 / Math.max(\r\n            this.domObj.clientWidth / window.innerWidth,\r\n            this.domObj.clientHeight / window.innerHeight\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Key press events\r\n     * @param event\r\n     */\r\n    KPresentation.prototype.handle = function (event) {\r\n        if (!this.isShown) return false;\r\n\r\n        switch (event) {\r\n            case 'button:esc':\r\n                this.stopPresentation();\r\n                break;\r\n            case 'button:prev':\r\n                this.prev();\r\n                break;\r\n            case 'button:next':\r\n                this.next();\r\n                break;\r\n            case 'button:space':\r\n                this.next();\r\n                break;\r\n            case 'window:resize':\r\n                this.resize(this.computeScale());\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n})(this, this.document);","(function (window, document) {\r\n    this.KShow = function () {\r\n        var defaults = {\r\n                presentationClass: 'k-presentation',\r\n                frameTag: 'section'\r\n            },\r\n            instance = this;\r\n\r\n        /**\r\n         * Use KShow as singleton\r\n         * @returns {*}\r\n         * @constructor\r\n         */\r\n        KShow = function () {\r\n            return instance;\r\n        };\r\n\r\n        KShow.prototype = this;\r\n        instance = new KShow();\r\n        instance.constructor = KShow();\r\n\r\n        this.presentations = [];\r\n\r\n        /**\r\n         * Create new options by passing custom arguments\r\n         */\r\n        if (arguments[0] && typeof arguments[0] == 'object') {\r\n            this.options = this.extendDefaultOptions(defaults, arguments[0]);\r\n        } else {\r\n            this.options = defaults;\r\n        }\r\n\r\n        /**\r\n         * Event handlers\r\n         * @type {{keydown: Function}}\r\n         */\r\n        this.handlers = {\r\n            keydown: function (e) {\r\n                if (!e) e = event;\r\n\r\n                switch (e.keyCode) {\r\n                    case 27:\r\n                        this.notify('button:esc');\r\n                        break;\r\n                    case 37:\r\n                        this.notify('button:prev');\r\n                        break;\r\n                    case 39:\r\n                        this.notify('button:next');\r\n                        break;\r\n                    case 32:\r\n                        this.notify('button:space');\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            },\r\n\r\n            resize: function () {\r\n                this.notify('window:resize');\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Initialize object of kShow\r\n         */\r\n        function init() {\r\n            var presentationsDomObjects = document.getElementsByClassName(this.options.presentationClass),\r\n                length = presentationsDomObjects.length;\r\n\r\n            if (!length) {\r\n                console.warn(\"No presentations available. Check presentations class selector.\");\r\n            }\r\n\r\n            for (var i = 0; i < length; i++) {\r\n                this.add(new KPresentation(presentationsDomObjects[i], this.options.frameTag));\r\n            }\r\n        }\r\n\r\n        function bind() {\r\n            window.addEventListener('keydown', this.handlers.keydown.bind(this));\r\n            window.addEventListener('resize', this.handlers.resize.bind(this));\r\n        }\r\n\r\n        init.call(this);\r\n        bind.call(this);\r\n\r\n        return instance;\r\n    };\r\n\r\n    KShow.prototype = new Helper();\r\n\r\n    /**\r\n     * Add presentation to list\r\n     * @param obj\r\n     * @returns {KShow}\r\n     */\r\n    KShow.prototype.add = function (obj) {\r\n        this.presentations.push(obj);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Get presentations count\r\n     * @returns {Number}\r\n     */\r\n    KShow.prototype.count = function () {\r\n        return this.presentations.length;\r\n    };\r\n\r\n    /**\r\n     * Get presentation by index\r\n     * @param index\r\n     * @returns {*}\r\n     */\r\n    KShow.prototype.get = function (index) {\r\n        if (index > -1 && index < this.presentations.length) {\r\n            return this.presentations[index];\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * Remove presentation at index\r\n     * @param index\r\n     * @returns {KShow}\r\n     */\r\n    KShow.prototype.remove = function (index) {\r\n        this.presentations.splice(index, 1);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Notify presentations about key events\r\n     * @param context\r\n     */\r\n    KShow.prototype.notify = function (context) {\r\n        var count = this.count();\r\n\r\n        for (var i = 0; i < count; i++) {\r\n            this.get(i).handle(context);\r\n        }\r\n    };\r\n\r\n})(this, this.document);"],"sourceRoot":"/source/"}